{% extends "base.html" %}
{% load bootstrap_icons %}
{% load static %}
{% load django_bootstrap5 %}
{% block content %}
    <div class="container" x-data>
        <section x-init="initJobPayment()">
            <div class="page-header">
                <h1 class="my_order_title">Оплата / Выбор тарифа</h1>
            </div>
            <div class="row">
                <div class="col-lg-9">
                    <div class="card">
                        <template x-if=" $store.main.job">     
                        <div class="card-body" x-data="{job: $store.main.job}">
                            <div class="row">
                                <div class="col-10">
                                    <div class="d-flex">
                                        <a :href="'/jobs/' +job.id" class="title">
                                            <h4 class="title" x-text="job.title"></h4>
                                        </a>

                                    </div>

                                    <h3 class="card-subtitle salary"
                                        x-text="$store.main.getSalaryStr(job)"></h3>


                                    <div class="d-flex ">
                                        <a :href="'/company/'+ job.company_id "
                                           x-text="job.company.name" class=" shop-name"></a> <img
                                            src="/staticfiles/contract/img/icons/approved.svg" height="16"
                                            class="ml-5 mt-15">
                                    </div>
                                    <div class="work-description-container">
                                        <div>
                                              <span class="job-card-item-customer  work-type"
                                                    x-html="$store.main.getRegionsStr(job)"></span>
                                        </div>
                                        <div class="d-flex vacancy-description">

                                            <div class="d-flex mr-15">
                                                <img src="/staticfiles/contract/img/icons/bag.svg" height="16"
                                                     class="mt-1 mr-5">
                                                <span class="work-experience"
                                                      x-text="$store.main.getWorkExpString(job.work_experience)"></span>
                                            </div>

                                            <div class="d-flex">
                                                <img src="/staticfiles/contract/img/icons/zalog.svg" height="16"
                                                     class="mt-1 mr-5">
                                                <span class="work-deposit"
                                                      x-text="$store.main.getDepositStr(job)"></span>
                                            </div>

                                        </div>


                                    </div>
                                </div>
                                <div class="col-2 text-center">
                                    <template x-if="job.company.logo">
                                        <img :src="'/media/'+job.company.logo" height="50" class="company-logo-mini"
                                             :alt="job.company.name"/>
                                    </template>
                                    <template x-if="!job.company.logo">
                                        <div class="">
                                            <span x-text="job.company.name"></span>
                                        </div>
                                    </template>
                                 
                                </div>
                            </div>
                        </div>
                    </template>
                    </div>
                </div>
            </div>
        </section>
        <section>
            <div class="">
            <form action="" method="post">
                {% csrf_token %}
                {% for field in payment_form.visible_fields %}
                <div class="row form-item">
             
                    <div class="col-xl-3 col-md-3 col-sm-4 form-item-label">
                        {{ field.label_tag }}
                    </div>
                
                    <div class="col-xl-4 col-md-5 col-sm-6">
                        {{ field.errors }}
                        {{ field }}
                        {{ field.help_text }}
                    </div>
                </div>
               
            {% endfor %}
       
                <input type="submit" value="Оплатить"/>
            </form>
        </div>
        </section>
    </div>

    <script>
        const initJobPayment = () => {
            application.initJobPayment({{ job.id }})
        }
        $(document).ready(() => {
            const application = new app()
        })
    </script>
{% endblock content %}